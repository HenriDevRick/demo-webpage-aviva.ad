<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aviva Resorts - Reserva Experience</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Mesmo CSS de antes */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; color: #004b5c; line-height: 1.6; }
        h1,h2,h3,h4,h5,h6 { font-family: 'Playfair Display', serif; font-weight: 700; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        header { background-color: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 50; }
        .header-content { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; }
        .logo { display: flex; align-items: center; gap: 10px; text-decoration: none; color: #004b5c; }
        .logo-img { height: 50px; width: auto; }
        nav a { margin-left: 30px; text-decoration: none; color: #004b5c; font-weight: 500; transition: color 0.3s; }
        nav a:hover { color: #0093d1; }

        .hero {
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)),
                url('https://private-us-east-1.manuscdn.com/sessionFile/MJbIllU8XkkduAFoEBZFB3/sandbox/YnijnZb1YqlBwd0wHWkjdu-img-1_1771957486000_na1fn_YXZpdmEtaGVyby1wb29s.png?x-oss-process=image/resize,w_1920,h_1920/format,webp/quality,q_80&Expires=1798761600&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9wcml2YXRlLXVzLWVhc3QtMS5tYW51c2Nkbi5jb20vc2Vzc2lvbkZpbGUvTUpiSWxsVThYa2tkdUFGb0VCWkZCMy9zYW5kYm94L1luaWpuWmIxWXFsQndkMHdIV2tqZHUtaW1nLTFfMTc3MTk1NzQ4NjAwMF9uYTFmbl9ZWFpwZG1FdGFHVnlieTF3YjI5cy5wbmc~eC1vc3MtcHJvY2Vzcz1pbWFnZS9yZXNpemUsd18xOTIwLGhfMTkyMC9mb3JtYXQsd2VicC9xdWFsaXR5LHFfODAiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3OTg3NjE2MDB9fX1dfQ__&Key-Pair-Id=K2HSFNDJXOU9YS&Signature=SgldAU1OUterLIwlRNHppDkOhK9n01isXYmrq04NQNw5o2mYLdjnjnimWPtfM5OqJLXzkPtblJfqGnEaGmagGt~SyYnUtqJ7z8f-Z2asvt-x7zWjaP-58-xbSjaJfVkYQAk5VBwyyD7MuzDfTZKPwkVl5mWGT2XKsp3QUHunJdkMAhbX7Kt~SltSjZE6Z-EQPgQ68t3Pw4zzDKiMTPB0K-~9AQ8aAeVy35fMVxpBH~0AKL~8xNhBYwgQOdV9Vb9PbXfwhGDhy145C-8mZSpm4-Gqa~tjjhSggGss5sNax-IyIuY5jr6flQaP3EE5r0nTxbU7G~NcZzeGxlRavK1k-Q__');
            background-size: cover; background-position: center 40%;
            height: 320px; display: flex; align-items: center; justify-content: center;
            text-align: center; color: white;
        }
        .hero-content h1 { font-size: 36px; margin-bottom: 12px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .hero-content p  { font-size: 16px; margin-bottom: 20px; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); }

        .btn { display: inline-block; padding: 15px 40px; background-color: #c6d900; color: #004b5c;
                text-decoration: none; border-radius: 8px; font-weight: 600; transition: all 0.3s;
                border: none; cursor: pointer; font-size: 16px; }
        .btn:hover { background-color: #b8c800; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }

        .tabs-section { background-color: white; padding: 80px 0; }
        .tabs-container { display: flex; gap: 10px; margin-bottom: 40px; justify-content: center; flex-wrap: wrap; }
        .tab-btn { padding: 12px 30px; background-color: #f0f0f0; color: #004b5c;
                   border: 2px solid transparent; border-radius: 8px; cursor: pointer;
                   font-weight: 600; transition: all 0.3s; font-size: 16px; }
        .tab-btn:hover { background-color: #e0e0e0; }
        .tab-btn.active { background-color: #c6d900; color: #004b5c; border-color: #004b5c; }

        .pega-container { background: white; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.1);
                          overflow: hidden; max-width: 900px; margin: 0 auto; min-height: 600px; }
        pega-embed { display: block; width: 100%; min-height: 600px; }

        .section-title { text-align: center; font-size: 42px; margin-bottom: 50px; color: #004b5c; }

        .destinos { background-color: white; padding: 80px 0; }
        .destinos-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .card { background: white; border-radius: 12px; overflow: hidden;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .card img { width: 100%; height: 250px; object-fit: cover; }
        .card-content { padding: 25px; }
        .card-content h3 { font-size: 24px; margin-bottom: 15px; color: #004b5c; }
        .card-content p  { color: #666; margin-bottom: 20px; }

        .experiencias { background-color: #004b5c; color: white; padding: 80px 0; }
        .experiencias .section-title { color: white; }
        .experiencias-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; }
        .exp-card { background-color: #0a6b7f; padding: 30px; border-radius: 12px;
                    text-align: center; transition: background-color 0.3s; }
        .exp-card:hover { background-color: #0d7d94; }
        .exp-icon { font-size: 48px; margin-bottom: 15px; }
        .exp-card h4 { font-size: 20px; margin-bottom: 10px; }
        .exp-card p  { font-size: 14px; color: #ddd; }

        .cta { background-color: #004b5c; color: white; padding: 60px 0; text-align: center; }
        .cta h3 { font-size: 36px; margin-bottom: 20px; }
        .cta p  { font-size: 18px; margin-bottom: 30px; }

        footer { background-color: #003a47; color: white; padding: 50px 0 20px; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; margin-bottom: 30px; }
        .footer-section h4 { margin-bottom: 15px; font-size: 18px; }
        .footer-section p, .footer-section li { color: #ccc; font-size: 14px; margin-bottom: 8px; }
        .footer-section ul { list-style: none; }
        .footer-section a { color: #c6d900; text-decoration: none; transition: color 0.3s; }
        .footer-section a:hover { color: #b8c800; }
        .footer-bottom { border-top: 1px solid #0a6b7f; padding-top: 20px; text-align: center; color: #999; font-size: 14px; }

        @media (max-width: 768px) {
            nav { display: none; }
            .hero-content h1 { font-size: 26px; }
            .section-title { font-size: 32px; }
            .destinos-grid, .experiencias-grid { grid-template-columns: 1fr; }
            .tabs-container { flex-direction: column; }
            .tab-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <header>...</header>
    <section class="hero">...</section>
    
    <section class="tabs-section" id="reserva">
        <div class="container">
            <h2 class="section-title">Autoatendimento</h2>
            <div class="tabs-container">
                <button class="tab-btn active" onclick="switchTab(0)">ConfirmaÃ§Ã£o de Reserva</button>
                <button class="tab-btn" onclick="switchTab(1)">Check-in</button>
                <button class="tab-btn" onclick="switchTab(2)">Check-out</button>
            </div>
            <div class="pega-container" id="pega-container"></div>
            
            <!-- Aviso de diagnÃ³stico -->
            <div style="margin-top: 20px; padding: 15px; background: #f0f0f0; border-radius: 8px;">
                <h3>ðŸ”§ DiagnÃ³stico</h3>
                <p>Teste os links abaixo no navegador:</p>
                <ul>
                    <li><a href="https://pega-proxy.vercel.app/prweb/PRRestService/c11nsvc/v1/pega-embed.js" target="_blank">Testar Proxy Vercel</a></li>
                    <li><a href="https://adqura02.pegalabs.io/prweb/PRRestService/c11nsvc/v1/pega-embed.js" target="_blank">Testar Servidor Direto</a></li>
                </ul>
            </div>
        </div>
    </section>

    <section class="destinos">...</section>
    <section class="experiencias">...</section>
    <section class="cta">...</section>
    <footer>...</footer>

    <!-- Script com fallback -->
    <script>
        // Tentar carregar do proxy Vercel primeiro
        var script = document.createElement('script');
        script.src = 'https://pega-proxy.vercel.app/prweb/PRRestService/c11nsvc/v1/pega-embed.js';
        script.onerror = function() {
            console.error('Proxy Vercel falhou, tentando servidor direto...');
            // Se falhar, tenta o servidor direto
            var script2 = document.createElement('script');
            script2.src = 'https://adqura02.pegalabs.io/prweb/PRRestService/c11nsvc/v1/pega-embed.js';
            document.head.appendChild(script2);
            
            script2.onload = function() {
                console.log('Script carregado do servidor direto');
                initPegaEmbed();
            };
        };
        script.onload = function() {
            console.log('Script carregado do proxy Vercel');
            initPegaEmbed();
        };
        document.head.appendChild(script);

        function initPegaEmbed() {
            var tabs = [
                { caseTypeID: 'Aviva-Experience-Work-BookingConfirmation', clientId: '12444249209306947994' },
                { caseTypeID: 'Aviva-Experience-Work-CheckinDigital', clientId: '55966357118681751596' },
                { caseTypeID: 'Aviva-Experience-Work-CheckoutDigital', clientId: '13673903982745833564' }
            ];

            window.switchTab = function(index) {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-btn')[index].classList.add('active');

                var container = document.getElementById('pega-container');
                container.innerHTML = '';

                var el = document.createElement('pega-embed');
                el.setAttribute('id', 'theEmbed');
                el.setAttribute('action', 'createCase');
                el.setAttribute('caseTypeID', tabs[index].caseTypeID);
                el.setAttribute('themeID', 'pzCosmosDefault');
                el.setAttribute('casePage', 'assignment');
                el.setAttribute('assignmentHeader', 'false');
                el.setAttribute('appAlias', 'aviva--experincia-do-hspede-1');
                
                // Tenta proxy, se falhar usa direto
                if (typeof window.USAR_PROXY !== 'undefined' && window.USAR_PROXY === false) {
                    el.setAttribute('pegaServerUrl', 'https://adqura02.pegalabs.io/prweb/');
                } else {
                    el.setAttribute('pegaServerUrl', 'https://pega-proxy.vercel.app/prweb/');
                }
                
                el.setAttribute('grantType', 'customBearer');
                el.setAttribute('clientId', tabs[index].clientId);
                el.style.width = '100%';
                container.appendChild(el);
            };

            window.switchTab(0);
        }
    </script>
</body>
</html>
